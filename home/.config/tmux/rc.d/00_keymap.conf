# Disable suspend-client while C-Z is prefix key
unbind C-Z

# Reload .tmux.conf file
bind R source "$HOME/.tmux.conf" \; display "~/.tmux.conf has been reloaded"

# Expose default mappings to 'M-' as much as possible
# https://gist.github.com/lambdalisue/0d4142179a82d720d00cf70de6f491d8
bind -n 'M-C-o'   rotate-window
bind -n 'M-C-z'   suspend-client
bind -n 'M-Space' next-layout
bind -n 'M-!'     break-pane
#bind -n 'M-"'     split-window
bind -n 'M-#'     list-buffers
bind -n 'M-$'     command-prompt -I '#S' "rename-session '%%'"
#bind -n 'M-%'     split-window -h
bind -n 'M-&'     confirm-before -p "kill-window #W? (y/n)" kill-window
bind -n "M-'"     command-prompt -p index "select-window -t ':%%'"
bind -n 'M-('     switch-client -p
bind -n 'M-)'     switch-client -n
bind -n 'M-,'     command-prompt -I '#W' "rename-window '%%'"
bind -n 'M--'     delete-buffer
bind -n 'M-.'     command-prompt "move-window -t '%%'"
#bind -n 'M-0'     select-window -t :=0
#bind -n 'M-1'     select-window -t :=1
#bind -n 'M-2'     select-window -t :=2
#bind -n 'M-3'     select-window -t :=3
#bind -n 'M-4'     select-window -t :=4
#bind -n 'M-5'     select-window -t :=5
#bind -n 'M-6'     select-window -t :=6
#bind -n 'M-7'     select-window -t :=7
#bind -n 'M-8'     select-window -t :=8
#bind -n 'M-9'     select-window -t :=9
bind -n 'M-:'     command-prompt
bind -n 'M-\;'     last-pane
bind -n 'M-='     choose-buffer
bind -n 'M-?'     list-keys
bind -n 'M-D'     choose-client
bind -n 'M-L'     switch-client -l
bind -n 'M-M'     select-pane -M
bind -n 'M-['     copy-mode
bind -n 'M-]'     paste-buffer
#bind -n 'M-c'     new-window
bind -n 'M-d'     detach-client
bind -n 'M-f'     command-prompt "find-window '%%'"
bind -n 'M-i'     display-message
#bind -n 'M-l'     last-window
bind -n 'M-m'     select-pane -m
bind -n 'M-n'     next-window
bind -n 'M-o'     select-pane -t :.+
bind -n 'M-p'     previous-window
bind -n 'M-q'     display-panes
bind -n 'M-r'     refresh-client
bind -n 'M-s'     choose-tree
bind -n 'M-t'     clock-mode
bind -n 'M-w'     choose-window
bind -n 'M-x'     confirm-before -p "kill-pane #P? (y/n)" kill-pane
bind -n 'M-z'     resize-pane -Z
bind -n 'M-{'     swap-pane -U
bind -n 'M-}'     swap-pane -D
bind -n 'M-~'     show-messages
#bind -n 'M-PPage' copy-mode -u
#bind -n 'M-Up'    select-pane -U
#bind -n 'M-Down'  select-pane -D
#bind -n 'M-Left'  select-pane -L
#bind -n 'M-Right' select-pane -R
#bind -n 'M-1'     select-layout even-horizontal
#bind -n 'M-2'     select-layout even-vertical
#bind -n 'M-3'     select-layout main-horizontal
#bind -n 'M-4'     select-layout main-vertical
#bind -n 'M-5'     select-layout tiled
#bind -n 'M-n'     next-window -a
#bind -n 'M-o'     rotate-window -D
#bind -n 'M-p'     previous-window -a
bind -n 'M-Up'    resize-pane -U 5
bind -n 'M-Down'  resize-pane -D 5
bind -n 'M-Left'  resize-pane -L 5
bind -n 'M-Right' resize-pane -R 5
bind -n 'M-C-Up'    resize-pane -U
bind -n 'M-C-Down'  resize-pane -D
bind -n 'M-C-Left'  resize-pane -L
bind -n 'M-C-Right' resize-pane -R

# Open new window or pane with the current path
bind 'c' new-window -c "#{pane_current_path}"
bind '"' split-window -c "#{pane_current_path}"
bind '%' split-window -h -c "#{pane_current_path}"
bind -n 'M-c' new-window -c "#{pane_current_path}"
bind -n "M-'" split-window -c "#{pane_current_path}"
bind -n 'M-5' split-window -h -c "#{pane_current_path}"

# Navigate pane
bind 'h' select-pane -L
bind 'j' select-pane -D
bind 'k' select-pane -U
bind 'l' select-pane -R
bind -n 'M-h' select-pane -L
bind -n 'M-j' select-pane -D
bind -n 'M-k' select-pane -U
bind -n 'M-l' select-pane -R

# Navigate window
bind -n 'M-S-l'     last-window

# Toggle pane synchronize
bind 'g' set-window-option synchronize-panes
bind -n 'M-g' set-window-option synchronize-panes

# Join and break panes
bind J choose-window "join-pane -h -s '%%'"
bind -n 'M-S-j' choose-window "join-pane -h -s '%%'"

# Use Vi in copymode
# Note that v/V are ovreride by tmux-plugins/tmux-yank
setw -g mode-keys vi
bind -t vi-copy 'Escape' cancel
bind -t vi-copy 'v'      begin-selection
bind -t vi-copy 'y'      copy-selection
bind -t vi-copy 'V'      rectangle-toggle
